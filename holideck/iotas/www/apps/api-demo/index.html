<!DOCTYPE html>
<html>
<head>
	
	<title>Holiday &raquo; API Demo</title>
	
</head>

<body>
	
	<div data-role="page" id="api-demo">
		
		<script src="api-demo.js"></script>
	
		<script>
			
			// Start the App
			function start_app() {
				console.log("start_app")
				theApp = new apidemo(); // Instance an App
				theApp.appStart(); // Start the App
			}
			
			// Stop the App
			function stop_app() {
				console.log("stop_app");
				theApp.appQuit();
				$( document ).undelegate("#api-demo", "pageinit", start_app);
				$( document ).undelegate("#api-demo", "pagebeforehide", stop_app );
			}
	
			console.log("Location #api-demo");
			
			$( document ).delegate("#api-demo", "pageinit", start_app);
			$( document ).delegate("#api-demo", "pagebeforehide", stop_app);

			// Must add this little bit of stuff to every app so it correctly clears itself from the cache
			$( '#api-demo' ).on("pagehide", function(event, ui) {
				console.log('api-demo.remove');
				$('#api-demo').remove();			// Dump the page from memory
			});
	
		</script>

		
		<header data-role="header" data-position="fixed">
			
			<a href="#apps" class="ui-icon-nodisc ui-icon-alt" data-role="button" data-icon="grid" data-iconpos="notext" data-theme="c" data-inline="true" data-rel="back">Apps</a>
			
			<h1>API Demo</h1>
			
		</header>
		
		<section data-role="content">
			
			<img src="api-demo.png" alt=""/>
			
			<h2>API Demo</h2>
					
			<p class="lede">This demo shows how HTML5 &amp; Javascript can be used to individually control every light on the Holiday.</p>
			
			<p>Essentially whatâ€™s happening here, is that an HTML5 form element triggers the start of some Javascript functionality. The Javascript functions generate a random RGB colour 50 times, once for each globe. Fifty colours are sent over the air to the Holiday controller, which sends those colours down the strand. This happens every 500ms until the switch is flicked off.</p>
			
			<div class="switch">
				
				<form>
			    <label for="flip" class="ui-hidden-accessible">API Demo Start Stop</label>
			    <select name="flip" id="flip" data-role="slider">
		        <option value="stop">Start</option>
		        <option value="start">Stop</option>
			    </select>
				</form>
				
			</div>
			
		</section>
		
	</div>
	<!-- /api-demo -->
		
</body>
</html>